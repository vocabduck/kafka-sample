FROM docker-enterprise-prod.artifactrepository.citigroup.net/developersvcs-java/oracle-jdk-rhel8/17e64:latest

# Create working directory
WORKDIR /opt/fast-regression

# Copy project files
COPY config /opt/fast-regression/config
COPY feature /opt/fast-regression/feature
COPY src /opt/fast-regression/src
COPY target /opt/fast-regression/target

# Set permissions
RUN chmod -R 777 /opt/fast-regression

# Safer CMD using absolute path and array form to avoid shell issues
CMD ["java", "-cp", "/opt/fast-regression/target/libs/*:/opt/fast-regression/target/*", "fast.common.run.Executor"]
