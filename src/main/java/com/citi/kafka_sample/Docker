# Use a Maven + JDK 17 image as the base
FROM docker-enterprise-prod.artifactrepository.citigroup.net/developersvcs-java/maven-jdk-rhel8/17e64:latest

# Set working directory inside the container
WORKDIR /opt/fast-regression

# Copy everything from your Git repo into the container
COPY . .

# Run Maven build and copy dependencies to target/libs
RUN mvn clean package -DskipTests && \
    mvn dependency:copy-dependencies -DoutputDirectory=target/libs

# Optional: give permissions if required by your cluster setup
RUN chmod -R 777 /opt/fast-regression

# Command to run your Java app
CMD java -cp "target/libs/*:target/classes" fast.common.run.Executor

